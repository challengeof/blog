<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="但行好事，莫问前程。"><title>markdown | 石頭剪刀b's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">markdown</h1><a id="logo" href="/.">石頭剪刀b's Blog</a><p class="description">但行好事，莫问前程。</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/about.html"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">markdown</h1><div class="post-meta">May 11, 2016<span> | </span><span class="category"><a href="/categories/心情/">心情</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/05/11/markdown/" href="/2016/05/11/markdown/#comments" class="ds-thread-count"></a><div class="post-content"><p>&lt;!doctype html&gt;</p>
<html><br><head><br><meta charset="utf-8"><br><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"><br><style><br>h1,<br>h2,<br>h3,<br>h4,<br>h5,<br>h6,<br>p,<br>blockquote {<br>    margin: 0;<br>    padding: 0;<br>}<br>body {<br>    font-family: “Helvetica Neue”, Helvetica, “Hiragino Sans GB”, Arial, sans-serif;<br>    font-size: 13px;<br>    line-height: 18px;<br>    color: #737373;<br>    background-color: white;<br>    margin: 10px 13px 10px 13px;<br>}<br>table {<br>    margin: 10px 0 15px 0;<br>    border-collapse: collapse;<br>}<br>td,th {<br>    border: 1px solid #ddd;<br>    padding: 3px 10px;<br>}<br>th {<br>    padding: 5px 10px;<br>}<br><br>a {<br>    color: #0069d6;<br>}<br>a:hover {<br>    color: #0050a3;<br>    text-decoration: none;<br>}<br>a img {<br>    border: none;<br>}<br>p {<br>    margin-bottom: 9px;<br>}<br>h1,<br>h2,<br>h3,<br>h4,<br>h5,<br>h6 {<br>    color: #404040;<br>    line-height: 36px;<br>}<br>h1 {<br>    margin-bottom: 18px;<br>    font-size: 30px;<br>}<br>h2 {<br>    font-size: 24px;<br>}<br>h3 {<br>    font-size: 18px;<br>}<br>h4 {<br>    font-size: 16px;<br>}<br>h5 {<br>    font-size: 14px;<br>}<br>h6 {<br>    font-size: 13px;<br>}<br>hr {<br>    margin: 0 0 19px;<br>    border: 0;<br>    border-bottom: 1px solid #ccc;<br>}<br>blockquote {<br>    padding: 13px 13px 21px 15px;<br>    margin-bottom: 18px;<br>    font-family:georgia,serif;<br>    font-style: italic;<br>}<br>blockquote:before {<br>    content:”\201C”;<br>    font-size:40px;<br>    margin-left:-10px;<br>    font-family:georgia,serif;<br>    color:#eee;<br>}<br>blockquote p {<br>    font-size: 14px;<br>    font-weight: 300;<br>    line-height: 18px;<br>    margin-bottom: 0;<br>    font-style: italic;<br>}<br>code, pre {<br>    font-family: Monaco, Andale Mono, Courier New, monospace;<br>}<br>code {<br>    background-color: #fee9cc;<br>    color: rgba(0, 0, 0, 0.75);<br>    padding: 1px 3px;<br>    font-size: 12px;<br>    -webkit-border-radius: 3px;<br>    -moz-border-radius: 3px;<br>    border-radius: 3px;<br>}<br>pre {<br>    display: block;<br>    padding: 14px;<br>    margin: 0 0 18px;<br>    line-height: 16px;<br>    font-size: 11px;<br>    border: 1px solid #d9d9d9;<br>    white-space: pre-wrap;<br>    word-wrap: break-word;<br>}<br>pre code {<br>    background-color: #fff;<br>    color:#737373;<br>    font-size: 11px;<br>    padding: 0;<br>}<br>sup {<br>    font-size: 0.83em;<br>    vertical-align: super;<br>    line-height: 0;<br>}<br><em> {<br>    -webkit-print-color-adjust: exact;<br>}<br>@media screen and (min-width: 914px) {<br>    body {<br>        width: 854px;<br>        margin:10px auto;<br>    }<br>}<br>@media print {<br>    body,code,pre code,h1,h2,h3,h4,h5,h6 {<br>        color: black;<br>    }<br>    table, pre {<br>        page-break-inside: avoid;<br>    }<br>}<br></style><br><title>关于jvm监控</title><br><br></head><br><body><br><br># 关于jvm监控<br><br>### 这里我介绍一些监控jvm的常用命令，此处以mac【10.10.3 (14D131)】为例。<br><br># 找到你java command目录<br><br><strong><em>ls -lth <code>whereis java</code></em></strong><br><br><strong><em>在我的电脑上，显示结果如下：</em></strong><br><br><strong><em>lrwxr-xr-x  1 root  wheel    74B 12 23 13:27 /usr/bin/java -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java</em></strong><br><br><strong><em>cd /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands</em></strong><br><br><strong><em>ls</em></strong><br><br><strong><em>你可以看到一些java相关的命令。</em></strong><br><br><img src="http://25.io/mou/Mou_128.png" alt="Mou icon"><br><br><strong><em>我们主要介绍这几个命令：jps，jstat，jstack，jmap，jinfo，jhat。</em></strong><br><br># jps<br><br><strong><em>jps -q显示java进程号</em></strong><br><br><strong><em>jps -l显示启动jvm的main class或者jar包的路径。</em></strong><br><br><strong><em>jps -m显示传递给main方法的参数</em></strong><br><br><strong><em>jps -v显示传递给jvm的参数</em></strong><br><br><strong>一般情况下jps -lvm就可以查询出来你需要的数据了。</strong><br><br>### 开启远程rmi，查询远程服务器的jvm信息<br><br>##### 在目标服务器上执行以下操作<br><br><strong><em>在你希望的位置建立policy文件jstatd.all.policy，如/root目录下。</em></strong><br><br>grant codebase “file:/usr/lib/jvm/java-7-openjdk-amd64/lib/tools.jar” {<br><br>   permission java.security.AllPermission;<br><br>};<br><br><strong><em>执行jstatd -p 1099 -J-Djava.security.policy=/root/jstatd.all.policy</em></strong><br><br><strong><em>在非目标服务器上执行jps remoteip（默认使用1099端口进行连接）</em></strong><br><br># jmap<br><br>### fdisk -l<br><br><strong>List the partition tables for the specified devices and then exit.</strong><br><br>### fdisk #device name<br><br><strong>Command (m for help): m</strong><br><br><strong>Command action</strong><br><br>   a   toggle a bootable flag<br><br>   b   edit bsd disklabel<br><br>   c   toggle the dos compatibility flag<br><br>   d   delete a partition<br><br>   l   list known partition types<br><br>   m   print this menu<br><br>   n   add a new partition<br><br>   o   create a new empty DOS partition table<br><br>   p   print the partition table<br><br>   q   quit without saving changes<br><br>   s   create a new empty Sun disklabel<br><br>   t   change a partition’s system id<br><br>   u   change display/entry units<br><br>   v   verify the partition table<br><br>   w   write table to disk and exit<br><br>   x   extra functionality (experts only)<br><br>### mkfs<br><br><strong>e.g.</strong><br><br>mkfs -t ext3 /dev/xvdc<br><br>### mount<br><br><strong>e.g.</strong><br><br>mount /dev/xvdc /mnt<br><br>### fuser<br><br>When you can’t execute the mount cammand successfully, try use fuser -m -v -i -k /mnt to kill the processes that use /mnt directory in interactive mode. Then try amount again.<br><br>## NFS share<br><br>When you are doing NFS share on a Debian system, you should install the tools necessary. Lets assume that the client (the machine on which you want to mount the remote folder) and server (the machine where remote folder is)<br><br><strong>On server you’ll need to install:</strong><br><br>apt-get install nfs-server portmap nfs-common<br><br><strong>in new debian versions</strong><br><br>apt-get install nfs-kernel-server portmap nfs-common<br><br><strong>On the client you’ll need to install:</strong><br><br>apt-get install nfs-client nfs-common<br><br><strong>Now what you need to do is put the folders you want to share with remote machine in /etc/exports:</strong><br><br>/share/excel 139.129.15.29(insecure,rw,sync,no_subtree_check,no_root_squash)<br><br>here the ip is eth1’s ip<br><br>Then:<br><br>exportfs -ra<br><br>/etc/init.d/nfs-kernel-server restart<br><br>/etc/init.d/portmap restart<br><br>Here 139.129.15.29 is the address of your local machine, replace that with your own IP. exports file has the list of machines that can access the shared folder. If your machines don’t have firewall restrictions to each other (you can solve this by adding host to /etc/hosts.allow).<br><br><em>*Now on your local machine you can use the command:</em><br><br>sudo mount -o soft,intr,rsize=8192,wsize=8192 server_ip:/path_to_tmp_folder/tmp /local_path_to_empty_tmp_folder/tmp<br><br>If you want to have automatic mount on boot you need to edit your /etc/fstab file and put the line on your client:<br><br>server_ip:/path_to_tmp/tmp /local_empty_folder/tmp nfs rsize=16384,wsize=16384,rw,auto,nolock<br><br>This is just an example of settings (copy pased from my own), you need to check nfs help to see what suites you best.<br><br></body><br></html></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://blog.dinggangchui.cn/2016/05/11/markdown/" data-id="cio2s4vm90002kx5bqbsflyk2" class="article-share-link">分享到</a><div class="tags"><a href="/tags/随笔/">随笔</a></div><div class="post-nav"><a href="/2016/05/11/lll/" class="pre"></a><a href="/2016/05/11/maupassant/" class="next">说说我在使用Hexo主题maupassant碰到的那些坑</a></div><div data-thread-key="2016/05/11/markdown/" data-title="markdown" data-url="http://blog.dinggangchui.cn/2016/05/11/markdown/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/05/11/markdown/" data-title="markdown" data-url="http://blog.dinggangchui.cn/2016/05/11/markdown/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><input placeholder="Search" type="text" class="st-default-search-input"/></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/心情/">心情</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂文/">杂文</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/杂文/" style="font-size: 15px;">杂文</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/05/11/node(1)/">node(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/11/test/">test</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/11/lll/">lll</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/11/markdown/">markdown</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/11/maupassant/">说说我在使用Hexo主题maupassant碰到的那些坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/10/惆怅/">惆怅，过往</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/08/随笔/">随笔</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/04/java读取配置文件/">刚工作时写的代码片段-java</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/01/git常用命令/">git常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/25/数据库事务概述/">数据库事务概述</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://wangguodong577.github.io" title="王国栋's Blog" target="_blank">王国栋's Blog</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">石頭剪刀b's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'challenge'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','Jfx3ygVq1psFuLGr4m7p','2.0.0');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>